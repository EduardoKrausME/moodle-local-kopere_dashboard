!function(){function b(a,n,m){var l=b.resolve(a);if(null==l){m=m||a,n=n||"root";var k=new Error('Failed to require "'+m+'" from "'+n+'"');throw k.path=m,k.parent=n,k.require=!0,k}var j=b.modules[l];if(!j._resolving&&!j.exports){var i={};i.exports={},i.client=i.component=!0,j._resolving=!0,j.call(this,i.exports,b.relative(l),i),delete j._resolving,j.exports=i.exports}return j.exports}b.modules={},b.aliases={},b.resolve=function(a){"/"===a.charAt(0)&&(a=a.slice(1));for(var f=[a,a+".js",a+".json",a+"/index.js",a+"/index.json"],e=0;e<f.length;e++){var a=f[e];if(b.modules.hasOwnProperty(a)){return a}if(b.aliases.hasOwnProperty(a)){return b.aliases[a]}}},b.normalize=function(f,e){var h=[];if("."!=e.charAt(0)){return e}f=f.split("/"),e=e.split("/");for(var g=0;g<e.length;++g){".."==e[g]?f.pop():"."!=e[g]&&""!=e[g]&&h.push(e[g])}return f.concat(h).join("/")},b.register=function(a,d){b.modules[a]=d},b.alias=function(a,d){if(!b.modules.hasOwnProperty(a)){throw new Error('Failed to alias "'+a+'", it does not exist')}b.aliases[d]=a},b.relative=function(a){function h(e,d){for(var i=e.length;i--;){if(e[i]===d){return i}}return -1}function g(i){var d=g.resolve(i);return b(d,a,i)}var f=b.normalize(a,"..");return g.resolve=function(j){var i=j.charAt(0);if("/"==i){return j.slice(1)}if("."==i){return b.normalize(f,j)}var e=a.split("/"),c=h(e,"deps")+1;return c||(c=0),j=e.slice(0,c+1).join("/")+"/deps/"+j},g.exists=function(c){return b.modules.hasOwnProperty(g.resolve(c))},g},b.register("component-emitter/index.js",function(g,f,j){function i(c){return c?h(c):void 0}function h(d){for(var c in i.prototype){d[c]=i.prototype[c]}return d}j.exports=i,i.prototype.on=i.prototype.addEventListener=function(d,c){return this._callbacks=this._callbacks||{},(this._callbacks[d]=this._callbacks[d]||[]).push(c),this},i.prototype.once=function(k,e){function m(){l.off(k,m),e.apply(this,arguments)}var l=this;return this._callbacks=this._callbacks||{},m.fn=e,this.on(k,m),this},i.prototype.off=i.prototype.removeListener=i.prototype.removeAllListeners=i.prototype.removeEventListener=function(l,k){if(this._callbacks=this._callbacks||{},0==arguments.length){return this._callbacks={},this}var o=this._callbacks[l];if(!o){return this}if(1==arguments.length){return delete this._callbacks[l],this}for(var n,m=0;m<o.length;m++){if(n=o[m],n===k||n.fn===k){o.splice(m,1);break}}return this},i.prototype.emit=function(l){this._callbacks=this._callbacks||{};var k=[].slice.call(arguments,1),o=this._callbacks[l];if(o){o=o.slice(0);for(var n=0,m=o.length;m>n;++n){o[n].apply(this,k)}}return this},i.prototype.listeners=function(c){return this._callbacks=this._callbacks||{},this._callbacks[c]||[]},i.prototype.hasListeners=function(c){return !!this.listeners(c).length}}),b.register("dropzone/index.js",function(e,d,f){f.exports=d("./lib/dropzone.js")}),b.register("dropzone/lib/dropzone.js",function(e,d,f){(function(){var w,v,u,t,s,r,q,p,o={}.hasOwnProperty,n=function(h,g){function j(){this.constructor=h}for(var i in g){o.call(g,i)&&(h[i]=g[i])}return j.prototype=g.prototype,h.prototype=new j,h.__super__=g.prototype,h},c=[].slice;v="undefined"!=typeof Emitter&&null!==Emitter?Emitter:d("emitter"),q=function(){},w=function(h){function g(j,x){var m,l,k;if(this.element=j,this.version=g.version,this.defaultOptions.previewTemplate=this.defaultOptions.previewTemplate.replace(/\n*/g,""),this.clickableElements=[],this.listeners=[],this.files=[],"string"==typeof this.element&&(this.element=document.querySelector(this.element)),!this.element||null==this.element.nodeType){throw new Error("Invalid dropzone element.")}if(this.element.dropzone){throw new Error("Dropzone already attached.")}if(g.instances.push(this),this.element.dropzone=this,m=null!=(k=g.optionsForElement(this.element))?k:{},this.options=i({},this.defaultOptions,m,null!=x?x:{}),this.options.forceFallback||!g.isBrowserSupported()){return this.options.fallback.call(this)}if(null==this.options.url&&(this.options.url=this.element.getAttribute("action")),!this.options.url){throw new Error("No URL provided.")}if(this.options.acceptedFiles&&this.options.acceptedMimeTypes){throw new Error("You can't provide both 'acceptedFiles' and 'acceptedMimeTypes'. 'acceptedMimeTypes' is deprecated.")}this.options.acceptedMimeTypes&&(this.options.acceptedFiles=this.options.acceptedMimeTypes,delete this.options.acceptedMimeTypes),this.options.method=this.options.method.toUpperCase(),(l=this.getExistingFallback())&&l.parentNode&&l.parentNode.removeChild(l),this.previewsContainer=this.options.previewsContainer?g.getElement(this.options.previewsContainer,"previewsContainer"):this.element,this.options.clickable&&(this.clickableElements=this.options.clickable===!0?[this.element]:g.getElements(this.options.clickable,"clickable")),this.init()}var i;return n(g,h),g.prototype.events=["drop","dragstart","dragend","dragenter","dragover","dragleave","addedfile","removedfile","thumbnail","error","errormultiple","processing","processingmultiple","uploadprogress","totaluploadprogress","sending","sendingmultiple","success","successmultiple","canceled","canceledmultiple","complete","completemultiple","reset","maxfilesexceeded","maxfilesreached"],g.prototype.defaultOptions={url:null,method:"post",withCredentials:!1,parallelUploads:2,uploadMultiple:!1,maxFilesize:256,paramName:"file",createImageThumbnails:!0,maxThumbnailFilesize:10,thumbnailWidth:100,thumbnailHeight:100,maxFiles:null,params:{},clickable:!0,ignoreHiddenFiles:!0,acceptedFiles:null,acceptedMimeTypes:null,autoProcessQueue:!0,addRemoveLinks:!1,previewsContainer:null,dictDefaultMessage:"Drop files here to upload",dictFallbackMessage:"Your browser does not support drag'n'drop file uploads.",dictFallbackText:"Please use the fallback form below to upload your files like in the olden days.",dictFileTooBig:"File is too big ({{filesize}}MiB). Max filesize: {{maxFilesize}}MiB.",dictInvalidFileType:"You can't upload files of this type.",dictResponseError:"Server responded with {{statusCode}} code.",dictCancelUpload:"Cancel upload",dictCancelUploadConfirmation:"Are you sure you want to cancel this upload?",dictRemoveFile:"Remove file",dictRemoveFileConfirmation:null,dictMaxFilesExceeded:"You can not upload any more files.",accept:function(k,j){return j()},init:function(){return q},forceFallback:!1,fallback:function(){var j,y,x,m,l,k;for(this.element.className=""+this.element.className+" dz-browser-not-supported",k=this.element.getElementsByTagName("div"),m=0,l=k.length;l>m;m++){j=k[m],/(^| )dz-message($| )/.test(j.className)&&(y=j,j.className="dz-message")}return y||(y=g.createElement('<div class="dz-message"><span></span></div>'),this.element.appendChild(y)),x=y.getElementsByTagName("span")[0],x&&(x.textContent=this.options.dictFallbackMessage),this.element.appendChild(this.getFallbackForm())},resize:function(k){var j,m,l;return j={srcX:0,srcY:0,srcWidth:k.width,srcHeight:k.height},m=k.width/k.height,l=this.options.thumbnailWidth/this.options.thumbnailHeight,k.height<this.options.thumbnailHeight||k.width<this.options.thumbnailWidth?(j.trgHeight=j.srcHeight,j.trgWidth=j.srcWidth):m>l?(j.srcHeight=k.height,j.srcWidth=j.srcHeight*l):(j.srcWidth=k.width,j.srcHeight=j.srcWidth/l),j.srcX=(k.width-j.srcWidth)/2,j.srcY=(k.height-j.srcHeight)/2,j},drop:function(){return this.element.classList.remove("dz-drag-hover")},dragstart:q,dragend:function(){return this.element.classList.remove("dz-drag-hover")},dragenter:function(){return this.element.classList.add("dz-drag-hover")},dragover:function(){return this.element.classList.add("dz-drag-hover")},dragleave:function(){return this.element.classList.remove("dz-drag-hover")},paste:q,reset:function(){return this.element.classList.remove("dz-started")},addedfile:function(L){var K,J,I,H,G,F,E,D,C,B,A,z,y,x=this;for(this.element===this.previewsContainer&&this.element.classList.add("dz-started"),L.previewElement=g.createElement(this.options.previewTemplate.trim()),L.previewTemplate=L.previewElement,this.previewsContainer.appendChild(L.previewElement),B=L.previewElement.querySelectorAll("[data-dz-name]"),H=0,E=B.length;E>H;H++){K=B[H],K.textContent=L.name}for(A=L.previewElement.querySelectorAll("[data-dz-size]"),G=0,D=A.length;D>G;G++){K=A[G],K.innerHTML=this.filesize(L.size)}for(this.options.addRemoveLinks&&(L._removeLink=g.createElement('<a class="dz-remove" href="javascript:undefined;" data-dz-remove>'+this.options.dictRemoveFile+"</a>"),L.previewElement.appendChild(L._removeLink)),J=function(a){return a.preventDefault(),a.stopPropagation(),L.status===g.UPLOADING?g.confirm(x.options.dictCancelUploadConfirmation,function(){return x.removeFile(L)}):x.options.dictRemoveFileConfirmation?g.confirm(x.options.dictRemoveFileConfirmation,function(){return x.removeFile(L)}):x.removeFile(L)},z=L.previewElement.querySelectorAll("[data-dz-remove]"),y=[],F=0,C=z.length;C>F;F++){I=z[F],y.push(I.addEventListener("click",J))}return y},removedfile:function(k){var j;return null!=(j=k.previewElement)&&j.parentNode.removeChild(k.previewElement),this._updateMaxFilesReachedClass()},thumbnail:function(k,j){var z,y,x,m,l;for(k.previewElement.classList.remove("dz-file-preview"),k.previewElement.classList.add("dz-image-preview"),m=k.previewElement.querySelectorAll("[data-dz-thumbnail]"),l=[],y=0,x=m.length;x>y;y++){z=m[y],z.alt=k.name,l.push(z.src=j)}return l},error:function(k,j){var z,y,x,m,l;for(k.previewElement.classList.add("dz-error"),"String"!=typeof j&&j.error&&(j=j.error),m=k.previewElement.querySelectorAll("[data-dz-errormessage]"),l=[],y=0,x=m.length;x>y;y++){z=m[y],l.push(z.textContent=j)}return l},errormultiple:q,processing:function(j){return j.previewElement.classList.add("dz-processing"),j._removeLink?j._removeLink.textContent=this.options.dictCancelUpload:void 0},processingmultiple:q,uploadprogress:function(k,j){var z,y,x,m,l;for(m=k.previewElement.querySelectorAll("[data-dz-uploadprogress]"),l=[],y=0,x=m.length;x>y;y++){z=m[y],l.push(z.style.width=""+j+"%")}return l},totaluploadprogress:q,sending:q,sendingmultiple:q,success:function(j){return j.previewElement.classList.add("dz-success")},successmultiple:q,canceled:function(j){return this.emit("error",j,"Upload canceled.")},canceledmultiple:q,complete:function(j){return j._removeLink?j._removeLink.textContent=this.options.dictRemoveFile:void 0},completemultiple:q,maxfilesexceeded:q,maxfilesreached:q,previewTemplate:'<div class="dz-preview dz-file-preview">\n  <div class="dz-details">\n    <div class="dz-filename"><span data-dz-name></span></div>\n    <div class="dz-size" data-dz-size></div>\n    <img data-dz-thumbnail />\n  </div>\n  <div class="dz-progress"><span class="dz-upload" data-dz-uploadprogress></span></div>\n  <div class="dz-success-mark"><span>✔</span></div>\n  <div class="dz-error-mark"><span>✘</span></div>\n  <div class="dz-error-message"><span data-dz-errormessage></span></div>\n</div>'},i=function(){var k,j,z,y,x,m,l;for(y=arguments[0],z=2<=arguments.length?c.call(arguments,1):[],m=0,l=z.length;l>m;m++){j=z[m];for(k in j){x=j[k],y[k]=x}}return y},g.prototype.getAcceptedFiles=function(){var k,j,x,m,l;for(m=this.files,l=[],j=0,x=m.length;x>j;j++){k=m[j],k.accepted&&l.push(k)}return l},g.prototype.getRejectedFiles=function(){var k,j,x,m,l;for(m=this.files,l=[],j=0,x=m.length;x>j;j++){k=m[j],k.accepted||l.push(k)}return l},g.prototype.getQueuedFiles=function(){var j,x,m,l,k;for(l=this.files,k=[],x=0,m=l.length;m>x;x++){j=l[x],j.status===g.QUEUED&&k.push(j)}return k},g.prototype.getUploadingFiles=function(){var j,x,m,l,k;for(l=this.files,k=[],x=0,m=l.length;m>x;x++){j=l[x],j.status===g.UPLOADING&&k.push(j)}return k},g.prototype.init=function(){var j,A,z,y,x,m,l,k=this;for("form"===this.element.tagName&&this.element.setAttribute("enctype","multipart/form-data"),this.element.classList.contains("dropzone")&&!this.element.querySelector(".dz-message")&&this.element.appendChild(g.createElement('<div class="dz-default dz-message"><span>'+this.options.dictDefaultMessage+"</span></div>")),this.clickableElements.length&&(z=function(){return k.hiddenFileInput&&document.body.removeChild(k.hiddenFileInput),k.hiddenFileInput=document.createElement("input"),k.hiddenFileInput.setAttribute("type","file"),(null==k.options.maxFiles||k.options.maxFiles>1)&&k.hiddenFileInput.setAttribute("multiple","multiple"),null!=k.options.acceptedFiles&&k.hiddenFileInput.setAttribute("accept",k.options.acceptedFiles),k.hiddenFileInput.style.visibility="hidden",k.hiddenFileInput.style.position="absolute",k.hiddenFileInput.style.top="0",k.hiddenFileInput.style.left="0",k.hiddenFileInput.style.height="0",k.hiddenFileInput.style.width="0",document.body.appendChild(k.hiddenFileInput),k.hiddenFileInput.addEventListener("change",function(){var C,B,E,D;if(B=k.hiddenFileInput.files,B.length){for(E=0,D=B.length;D>E;E++){C=B[E],k.addFile(C)}}return z()})},z()),this.URL=null!=(m=window.URL)?m:window.webkitURL,l=this.events,y=0,x=l.length;x>y;y++){j=l[y],this.on(j,this.options[j])}return this.on("uploadprogress",function(){return k.updateTotalUploadProgress()}),this.on("removedfile",function(){return k.updateTotalUploadProgress()}),this.on("canceled",function(B){return k.emit("complete",B)}),this.on("complete",function(){return 0===k.getUploadingFiles().length&&0===k.getQueuedFiles().length?setTimeout(function(){return k.emit("queuecomplete")},0):void 0}),A=function(B){return B.stopPropagation(),B.preventDefault?B.preventDefault():B.returnValue=!1},this.listeners=[{element:this.element,events:{dragstart:function(B){return k.emit("dragstart",B)},dragenter:function(B){return A(B),k.emit("dragenter",B)},dragover:function(C){var B;try{B=C.dataTransfer.effectAllowed}catch(D){}return C.dataTransfer.dropEffect="move"===B||"linkMove"===B?"move":"copy",A(C),k.emit("dragover",C)},dragleave:function(B){return k.emit("dragleave",B)},drop:function(B){return A(B),k.drop(B)},dragend:function(B){return k.emit("dragend",B)},paste:function(B){return A(B),k.paste(B)}}}],this.clickableElements.forEach(function(B){return k.listeners.push({element:B,events:{click:function(a){return B!==k.element||a.target===k.element||g.elementInside(a.target,k.element.querySelector(".dz-message"))?k.hiddenFileInput.click():void 0}}})}),this.enable(),this.options.init.call(this)},g.prototype.destroy=function(){var j;return this.disable(),this.removeAllFiles(!0),(null!=(j=this.hiddenFileInput)?j.parentNode:void 0)&&(this.hiddenFileInput.parentNode.removeChild(this.hiddenFileInput),this.hiddenFileInput=null),delete this.element.dropzone,g.instances.splice(g.instances.indexOf(this),1)},g.prototype.updateTotalUploadProgress=function(){var k,j,A,z,y,x,m,l;if(z=0,A=0,k=this.getAcceptedFiles(),k.length){for(l=this.getAcceptedFiles(),x=0,m=l.length;m>x;x++){j=l[x],z+=j.upload.bytesSent,A+=j.upload.total}y=100*z/A}else{y=100}return this.emit("totaluploadprogress",y,A,z)},g.prototype.getFallbackForm=function(){var j,m,l,k;return(j=this.getExistingFallback())?j:(l='<div class="dz-fallback">',this.options.dictFallbackText&&(l+="<p>"+this.options.dictFallbackText+"</p>"),l+='<input type="file" name="'+this.options.paramName+(this.options.uploadMultiple?"[]":"")+'" '+(this.options.uploadMultiple?'multiple="multiple"':void 0)+' /><input type="submit" value="Upload!"></div>',m=g.createElement(l),"FORM"!==this.element.tagName?(k=g.createElement('<form action="'+this.options.url+'" enctype="multipart/form-data" method="'+this.options.method+'"></form>'),k.appendChild(m)):(this.element.setAttribute("enctype","multipart/form-data"),this.element.setAttribute("method",this.options.method)),null!=k?k:m)},g.prototype.getExistingFallback=function(){var k,j,y,x,m,l;for(j=function(A){var z,C,B;for(C=0,B=A.length;B>C;C++){if(z=A[C],/(^| )fallback($| )/.test(z.className)){return z}}},l=["div","form"],x=0,m=l.length;m>x;x++){if(y=l[x],k=j(this.element.getElementsByTagName(y))){return k}}},g.prototype.setupEventListeners=function(){var k,j,z,y,x,m,l;for(m=this.listeners,l=[],y=0,x=m.length;x>y;y++){k=m[y],l.push(function(){var A,a;A=k.events,a=[];for(j in A){z=A[j],a.push(k.element.addEventListener(j,z,!1))}return a}())}return l},g.prototype.removeEventListeners=function(){var k,j,z,y,x,m,l;for(m=this.listeners,l=[],y=0,x=m.length;x>y;y++){k=m[y],l.push(function(){var A,a;A=k.events,a=[];for(j in A){z=A[j],a.push(k.element.removeEventListener(j,z,!1))}return a}())}return l},g.prototype.disable=function(){var k,j,x,m,l;for(this.clickableElements.forEach(function(y){return y.classList.remove("dz-clickable")}),this.removeEventListeners(),m=this.files,l=[],j=0,x=m.length;x>j;j++){k=m[j],l.push(this.cancelUpload(k))}return l},g.prototype.enable=function(){return this.clickableElements.forEach(function(j){return j.classList.add("dz-clickable")}),this.setupEventListeners()},g.prototype.filesize=function(k){var j;return k>=109951162777.6?(k/=109951162777.6,j="TiB"):k>=107374182.4?(k/=107374182.4,j="GiB"):k>=104857.6?(k/=104857.6,j="MiB"):k>=102.4?(k/=102.4,j="KiB"):(k=10*k,j="b"),"<strong>"+Math.round(k)/10+"</strong> "+j},g.prototype._updateMaxFilesReachedClass=function(){return null!=this.options.maxFiles&&this.getAcceptedFiles().length>=this.options.maxFiles?(this.getAcceptedFiles().length===this.options.maxFiles&&this.emit("maxfilesreached",this.files),this.element.classList.add("dz-max-files-reached")):this.element.classList.remove("dz-max-files-reached")},g.prototype.drop=function(k){var j,l;k.dataTransfer&&(this.emit("drop",k),j=k.dataTransfer.files,j.length&&(l=k.dataTransfer.items,l&&l.length&&null!=l[0].webkitGetAsEntry?this._addFilesFromItems(l):this.handleFiles(j)))},g.prototype.paste=function(j){},g.prototype.handleFiles=function(k){var j,x,m,l;for(l=[],x=0,m=k.length;m>x;x++){j=k[x],l.push(this.addFile(j))}return l},g.prototype._addFilesFromItems=function(k){var j,y,x,m,l;for(l=[],x=0,m=k.length;m>x;x++){y=k[x],null!=y.webkitGetAsEntry&&(j=y.webkitGetAsEntry())?j.isFile?l.push(this.addFile(y.getAsFile())):j.isDirectory?l.push(this._addFilesFromDirectory(j,j.name)):l.push(void 0):null!=y.getAsFile?null==y.kind||"file"===y.kind?l.push(this.addFile(y.getAsFile())):l.push(void 0):l.push(void 0)}return l},g.prototype._addFilesFromDirectory=function(k,j){var x,m,l=this;return x=k.createReader(),m=function(y){var B,A,z;for(A=0,z=y.length;z>A;A++){B=y[A],B.isFile?B.file(function(C){return l.options.ignoreHiddenFiles&&"."===C.name.substring(0,1)?void 0:(C.fullPath=""+j+"/"+C.name,l.addFile(C))}):B.isDirectory&&l._addFilesFromDirectory(B,""+j+"/"+B.name)}},x.readEntries(m,function(y){return"undefined"!=typeof console&&null!==console?"function"==typeof console.log?console.log(y):void 0:void 0})},g.prototype.accept=function(j,k){return j.size>1024*this.options.maxFilesize*1024?k(this.options.dictFileTooBig.replace("{{filesize}}",Math.round(j.size/1024/10.24)/100).replace("{{maxFilesize}}",this.options.maxFilesize)):g.isValidFile(j,this.options.acceptedFiles)?null!=this.options.maxFiles&&this.getAcceptedFiles().length>=this.options.maxFiles?(k(this.options.dictMaxFilesExceeded.replace("{{maxFiles}}",this.options.maxFiles)),this.emit("maxfilesexceeded",j)):this.options.accept.call(this,j,k):k(this.options.dictInvalidFileType)},g.prototype.addFile=function(j){var k=this;return j.upload={progress:0,total:j.size,bytesSent:0},this.files.push(j),j.status=g.ADDED,this.emit("addedfile",j),this._enqueueThumbnail(j),this.accept(j,function(a){return a?(j.accepted=!1,k._errorProcessing([j],a)):k.enqueueFile(j),k._updateMaxFilesReachedClass()})},g.prototype.enqueueFiles=function(k){var j,m,l;for(m=0,l=k.length;l>m;m++){j=k[m],this.enqueueFile(j)}return null},g.prototype.enqueueFile=function(j){var k=this;if(j.accepted=!0,j.status!==g.ADDED){throw new Error("This file can't be queued because it has already been processed or was rejected.")}return j.status=g.QUEUED,this.options.autoProcessQueue?setTimeout(function(){return k.processQueue()},0):void 0},g.prototype._thumbnailQueue=[],g.prototype._processingThumbnail=!1,g.prototype._enqueueThumbnail=function(k){var j=this;return this.options.createImageThumbnails&&k.type.match(/image.*/)&&k.size<=1024*this.options.maxThumbnailFilesize*1024?(this._thumbnailQueue.push(k),setTimeout(function(){return j._processThumbnailQueue()},0)):void 0},g.prototype._processThumbnailQueue=function(){var j=this;if(!this._processingThumbnail&&0!==this._thumbnailQueue.length){return this._processingThumbnail=!0,this.createThumbnail(this._thumbnailQueue.shift(),function(){return j._processingThumbnail=!1,j._processThumbnailQueue()})}},g.prototype.removeFile=function(j){return j.status===g.UPLOADING&&this.cancelUpload(j),this.files=p(this.files,j),this.emit("removedfile",j),0===this.files.length?this.emit("reset"):void 0},g.prototype.removeAllFiles=function(j){var x,m,l,k;for(null==j&&(j=!1),k=this.files.slice(),m=0,l=k.length;l>m;m++){x=k[m],(x.status!==g.UPLOADING||j)&&this.removeFile(x)}return null},g.prototype.createThumbnail=function(k,j){var m,l=this;return m=new FileReader,m.onload=function(){var a;return a=document.createElement("img"),a.onload=function(){var E,D,C,B,A,z,y,x;return k.width=a.width,k.height=a.height,C=l.options.resize.call(l,k),null==C.trgWidth&&(C.trgWidth=l.options.thumbnailWidth),null==C.trgHeight&&(C.trgHeight=l.options.thumbnailHeight),E=document.createElement("canvas"),D=E.getContext("2d"),E.width=C.trgWidth,E.height=C.trgHeight,r(D,a,null!=(A=C.srcX)?A:0,null!=(z=C.srcY)?z:0,C.srcWidth,C.srcHeight,null!=(y=C.trgX)?y:0,null!=(x=C.trgY)?x:0,C.trgWidth,C.trgHeight),B=E.toDataURL("image/png"),l.emit("thumbnail",k,B),null!=j?j():void 0},a.src=m.result},m.readAsDataURL(k)},g.prototype.processQueue=function(){var k,j,m,l;if(j=this.options.parallelUploads,m=this.getUploadingFiles().length,k=m,!(m>=j)&&(l=this.getQueuedFiles(),l.length>0)){if(this.options.uploadMultiple){return this.processFiles(l.slice(0,j-m))}for(;j>k;){if(!l.length){return}this.processFile(l.shift()),k++}}},g.prototype.processFile=function(j){return this.processFiles([j])},g.prototype.processFiles=function(j){var m,l,k;for(l=0,k=j.length;k>l;l++){m=j[l],m.processing=!0,m.status=g.UPLOADING,this.emit("processing",m)}return this.options.uploadMultiple&&this.emit("processingmultiple",j),this.uploadFiles(j)},g.prototype._getFilesWithXhr=function(k){var j,l;return l=function(){var y,x,m,a;for(m=this.files,a=[],y=0,x=m.length;x>y;y++){j=m[y],j.xhr===k&&a.push(j)}return a}.call(this)},g.prototype.cancelUpload=function(j){var A,z,y,x,m,l,k;if(j.status===g.UPLOADING){for(z=this._getFilesWithXhr(j.xhr),y=0,m=z.length;m>y;y++){A=z[y],A.status=g.CANCELED}for(j.xhr.abort(),x=0,l=z.length;l>x;x++){A=z[x],this.emit("canceled",A)}this.options.uploadMultiple&&this.emit("canceledmultiple",z)}else{((k=j.status)===g.ADDED||k===g.QUEUED)&&(j.status=g.CANCELED,this.emit("canceled",j),this.options.uploadMultiple&&this.emit("canceledmultiple",[j]))}return this.options.autoProcessQueue?this.processQueue():void 0},g.prototype.uploadFile=function(j){return this.uploadFiles([j])},g.prototype.uploadFiles=function(ap){var ao,an,am,al,ak,aj,ai,ah,ag,af,ae,ad,ac,aa,Y,W,U,S,Q,O,M,K,J,ab,Z,X,V,T,R,P,N,L=this;for(W=new XMLHttpRequest,U=0,M=ap.length;M>U;U++){ao=ap[U],ao.xhr=W}W.open(this.options.method,this.options.url,!0),W.withCredentials=!!this.options.withCredentials,ac=null,am=function(){var a,k,j;for(j=[],a=0,k=ap.length;k>a;a++){ao=ap[a],j.push(L._errorProcessing(ap,ac||L.options.dictResponseError.replace("{{statusCode}}",W.status),W))}return j},aa=function(E){var D,C,B,A,z,y,x,m,a;if(null!=E){for(C=100*E.loaded/E.total,B=0,y=ap.length;y>B;B++){ao=ap[B],ao.upload={progress:C,total:E.total,bytesSent:E.loaded}}}else{for(D=!0,C=100,A=0,x=ap.length;x>A;A++){ao=ap[A],(100!==ao.upload.progress||ao.upload.bytesSent!==ao.upload.total)&&(D=!1),ao.upload.progress=C,ao.upload.bytesSent=ao.upload.total}if(D){return}}for(a=[],z=0,m=ap.length;m>z;z++){ao=ap[z],a.push(L.emit("uploadprogress",ao,C,ao.upload.bytesSent))}return a},W.onload=function(k){var j;if(ap[0].status!==g.CANCELED&&4===W.readyState){if(ac=W.responseText,W.getResponseHeader("content-type")&&~W.getResponseHeader("content-type").indexOf("application/json")){try{ac=JSON.parse(ac)}catch(a){k=a,ac="Invalid JSON response from server."}}return aa(),200<=(j=W.status)&&300>j?L._finished(ap,ac,k):am()}},W.onerror=function(){return ap[0].status!==g.CANCELED?am():void 0},ad=null!=(V=W.upload)?V:W,ad.onprogress=aa,aj={Accept:"application/json","Cache-Control":"no-cache","X-Requested-With":"XMLHttpRequest"},this.options.headers&&i(aj,this.options.headers);for(al in aj){ak=aj[al],W.setRequestHeader(al,ak)}if(an=new FormData,this.options.params){T=this.options.params;for(af in T){Y=T[af],an.append(af,Y)}}for(S=0,K=ap.length;K>S;S++){ao=ap[S],this.emit("sending",ao,W,an)}if(this.options.uploadMultiple&&this.emit("sendingmultiple",ap,W,an),"FORM"===this.element.tagName){for(R=this.element.querySelectorAll("input, textarea, select, button"),Q=0,J=R.length;J>Q;Q++){if(ai=R[Q],ah=ai.getAttribute("name"),ag=ai.getAttribute("type"),"SELECT"===ai.tagName&&ai.hasAttribute("multiple")){for(P=ai.options,O=0,ab=P.length;ab>O;O++){ae=P[O],ae.selected&&an.append(ah,ae.value)}}else{(!ag||"checkbox"!==(N=ag.toLowerCase())&&"radio"!==N||ai.checked)&&an.append(ah,ai.value)}}}for(X=0,Z=ap.length;Z>X;X++){ao=ap[X],an.append(""+this.options.paramName+(this.options.uploadMultiple?"[]":""),ao,ao.name)}return W.send(an)},g.prototype._finished=function(j,y,x){var m,l,k;for(l=0,k=j.length;k>l;l++){m=j[l],m.status=g.SUCCESS,this.emit("success",m,y,x),this.emit("complete",m)}return this.options.uploadMultiple&&(this.emit("successmultiple",j,y,x),this.emit("completemultiple",j)),this.options.autoProcessQueue?this.processQueue():void 0},g.prototype._errorProcessing=function(j,y,x){var m,l,k;for(l=0,k=j.length;k>l;l++){m=j[l],m.status=g.ERROR,this.emit("error",m,y,x),this.emit("complete",m)}return this.options.uploadMultiple&&(this.emit("errormultiple",j,y,x),this.emit("completemultiple",j)),this.options.autoProcessQueue?this.processQueue():void 0},g}(v),w.version="3.8.3",w.options={},w.optionsForElement=function(a){return a.getAttribute("id")?w.options[u(a.getAttribute("id"))]:void 0},w.instances=[],w.forElement=function(g){if("string"==typeof g&&(g=document.querySelector(g)),null==(null!=g?g.dropzone:void 0)){throw new Error("No Dropzone found for given element. This is probably because you're trying to access it before Dropzone had the time to initialize. Use the `init` option to setup any additional observers on your Dropzone.")}return g.dropzone},w.autoDiscover=!0,w.discover=function(){var a,l,k,j,i,h;for(document.querySelectorAll?k=document.querySelectorAll(".dropzone"):(k=[],a=function(m){var g,z,y,x;for(x=[],z=0,y=m.length;y>z;z++){g=m[z],/(^| )dropzone($| )/.test(g.className)?x.push(k.push(g)):x.push(void 0)}return x},a(document.getElementsByTagName("div")),a(document.getElementsByTagName("form"))),h=[],j=0,i=k.length;i>j;j++){l=k[j],w.optionsForElement(l)!==!1?h.push(new w(l)):h.push(void 0)}return h},w.blacklistedBrowsers=[/opera.*Macintosh.*version\/12/i],w.isBrowserSupported=function(){var a,j,i,h,g;if(a=!0,window.File&&window.FileReader&&window.FileList&&window.Blob&&window.FormData&&document.querySelector){if("classList" in document.createElement("a")){for(g=w.blacklistedBrowsers,i=0,h=g.length;h>i;i++){j=g[i],j.test(navigator.userAgent)&&(a=!1)}}else{a=!1}}else{a=!1}return a},p=function(h,g){var l,k,j,i;for(i=[],k=0,j=h.length;j>k;k++){l=h[k],l!==g&&i.push(l)}return i},u=function(g){return g.replace(/[\-_](\w)/g,function(h){return h[1].toUpperCase()})},w.createElement=function(h){var g;return g=document.createElement("div"),g.innerHTML=h,g.childNodes[0]},w.elementInside=function(h,g){if(h===g){return !0}for(;h=h.parentNode;){if(h===g){return !0}}return !1},w.getElement=function(h,g){var i;if("string"==typeof h?i=document.querySelector(h):null!=h.nodeType&&(i=h),null==i){throw new Error("Invalid `"+g+"` option provided. Please provide a CSS selector or a plain HTML element.")}return i},w.getElements=function(F,E){var D,C,B,A,z,y,x,m;if(F instanceof Array){B=[];try{for(A=0,y=F.length;y>A;A++){C=F[A],B.push(this.getElement(C,E))}}catch(l){D=l,B=null}}else{if("string"==typeof F){for(B=[],m=document.querySelectorAll(F),z=0,x=m.length;x>z;z++){C=m[z],B.push(C)}}else{null!=F.nodeType&&(B=[F])}}if(null==B||!B.length){throw new Error("Invalid `"+E+"` option provided. Please provide a CSS selector, a plain HTML element or a list of those.")}return B},w.confirm=function(h,g,i){return window.confirm(h)?g():null!=i?i():void 0},w.isValidFile=function(i,h){var x,m,l,k,j;if(!h){return !0}for(h=h.split(","),m=i.type,x=m.replace(/\/.*$/,""),k=0,j=h.length;j>k;k++){if(l=h[k],l=l.trim(),"."===l.charAt(0)){if(-1!==i.name.toLowerCase().indexOf(l.toLowerCase(),i.name.length-l.length)){return !0}}else{if(/\/\*$/.test(l)){if(x===l.replace(/\/.*$/,"")){return !0}}else{if(m===l){return !0}}}}return !1},"undefined"!=typeof jQuery&&null!==jQuery&&(jQuery.fn.dropzone=function(a){return this.each(function(){return new w(this,a)})}),"undefined"!=typeof f&&null!==f?f.exports=w:window.Dropzone=w,w.ADDED="added",w.QUEUED="queued",w.ACCEPTED=w.QUEUED,w.UPLOADING="uploading",w.PROCESSING=w.UPLOADING,w.CANCELED="canceled",w.ERROR="error",w.SUCCESS="success",s=function(F){var E,D,C,B,A,z,y,x,m,l;for(y=F.naturalWidth,z=F.naturalHeight,D=document.createElement("canvas"),D.width=1,D.height=z,C=D.getContext("2d"),C.drawImage(F,0,0),B=C.getImageData(0,0,1,z).data,l=0,A=z,x=z;x>l;){E=B[4*(x-1)+3],0===E?A=x:l=x,x=A+l>>1}return m=x/z,0===m?1:m},r=function(F,E,D,C,B,A,z,y,x,m){var g;return g=s(E),F.drawImage(E,D,C,B,A,z,y,x,m/g)},t=function(H,G){var F,E,D,C,B,A,z,y,x;if(D=!1,x=!0,E=H.document,y=E.documentElement,F=E.addEventListener?"addEventListener":"attachEvent",z=E.addEventListener?"removeEventListener":"detachEvent",A=E.addEventListener?"":"on",C=function(a){return"readystatechange"!==a.type||"complete"===E.readyState?(("load"===a.type?H:E)[z](A+a.type,C,!1),!D&&(D=!0)?G.call(H,a.type||a):void 0):void 0},B=function(){var h;try{y.doScroll("left")}catch(g){return h=g,setTimeout(B,50),void 0}return C("poll")},"complete"!==E.readyState){if(E.createEventObject&&y.doScroll){try{x=!H.frameElement}catch(m){}x&&B()}return E[F](A+"DOMContentLoaded",C,!1),E[F](A+"readystatechange",C,!1),H[F](A+"load",C,!1)}},w._autoDiscoverFunction=function(){return w.autoDiscover?w.discover():void 0},t(window,w._autoDiscoverFunction)}).call(this)}),b.alias("component-emitter/index.js","dropzone/deps/emitter/index.js"),b.alias("component-emitter/index.js","emitter/index.js"),"object"==typeof exports?module.exports=b("dropzone"):"function"==typeof define&&define.amd?define(function(){return b("dropzone")}):this.Dropzone=b("dropzone")}();