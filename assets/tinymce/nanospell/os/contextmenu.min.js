tinymce.PluginManager.add("contextmenu",function(b){var c,a=b.settings.contextmenu_never_use_native;b.rendercontextmenu=function(j,h){if(b.nanospellstarted&&h===null){return}var g;if(j.ctrlKey&&!a){return}j.preventDefault();g=b.settings.contextmenu||"link image inserttable | cell row column deletetable";if(c){c.remove();c=null}var d=[];if(h){if(b.settings.nanospell_compact_menu){d.push({text:"Spell Checking",icon:"spellchecker",menu:h})}else{for(var f=0;f<h.length;f++){h[f].icon="spellchecker";d.push(h[f])}d.push({text:"|"})}}tinymce.each(g.split(/[ ,]/),function(e){var i=b.menuItems[e];if(e=="|"){i={text:e}}if(i){i.shortcut="";d.push(i)}});for(var f=0;f<d.length;f++){if(d[f].text=="|"){if(f===0||f==d.length-1){d.splice(f,1)}}}c=new tinymce.ui.Menu({items:d,context:"contextmenu"});c.addClass("contextmenu");c.renderTo(document.body);b.on("remove",function(){c.remove();c=null});var k={x:j.pageX,y:j.pageY};if(!b.inline){k=tinymce.DOM.getPos(b.getContentAreaContainer());k.x+=j.clientX;k.y+=j.clientY}c.moveTo(k.x,k.y);b.contextmenu=c};b.on("contextmenu",b.rendercontextmenu)});