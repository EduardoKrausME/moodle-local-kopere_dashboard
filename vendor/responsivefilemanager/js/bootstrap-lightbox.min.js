!function(b){var a=function(d,e){this.options=e;this.$element=b(d).delegate('[data-dismiss="lightbox"]',"click.dismiss.lightbox",b.proxy(this.hide,this));this.options.remote&&this.$element.find(".lightbox-body").load(this.options.remote)};a.prototype=b.extend({},b.fn.modal.Constructor.prototype);a.prototype.constructor=a;a.prototype.enforceFocus=function(){var d=this;b(document).on("focusin.lightbox",function(f){if(d.$element[0]!==f.target&&!d.$element.has(f.target).length){d.$element.focus()}})};a.prototype.show=function(){var d=this,e=b.Event("show");this.$element.trigger(e);if(this.isShown||e.isDefaultPrevented()){return}this.isShown=true;this.escape();this.preloadSize(function(){d.backdrop(function(){var f=b.support.transition&&d.$element.hasClass("fade");if(!d.$element.parent().length){d.$element.appendTo(document.body)}hide_animation();d.$element.show();if(f){d.$element[0].offsetWidth}d.$element.addClass("in").attr("aria-hidden",false);d.enforceFocus();f?d.$element.one(b.support.transition.end,function(){d.$element.focus().trigger("shown")}):d.$element.focus().trigger("shown")})})};a.prototype.hide=function(d){d&&d.preventDefault();var e=this;d=b.Event("hide");this.$element.trigger(d);if(!this.isShown||d.isDefaultPrevented()){return}this.isShown=false;this.escape();b(document).off("focusin.lightbox");this.$element.removeClass("in").attr("aria-hidden",true);b.support.transition&&this.$element.hasClass("fade")?this.hideWithTransition():this.hideModal()};a.prototype.escape=function(){var d=this;if(this.isShown&&this.options.keyboard){this.$element.on("keyup.dismiss.lightbox",function(e){e.which==27&&d.hide()})}else{if(!this.isShown){this.$element.off("keyup.dismiss.lightbox")}}};a.prototype.preloadSize=function(z){var j=b.Callbacks();if(z){j.add(z)}var d=this;var m,A,g,y,x,v,k,w,q,e;m=b(window).height();A=b(window).width();g=parseInt(d.$element.find(".lightbox-content").css("padding-top"),10);y=parseInt(d.$element.find(".lightbox-content").css("padding-bottom"),10);x=parseInt(d.$element.find(".lightbox-content").css("padding-left"),10);v=parseInt(d.$element.find(".lightbox-content").css("padding-right"),10);k=d.$element.find(".lightbox-content").find("img:first");w=new Image;w.onload=function(){if(w.width+x+v>=A){q=w.width;e=w.height;w.width=A-x-v;w.height=e/q*w.width}if(w.height+g+y>=m){q=w.width;e=w.height;w.height=m-g-y;w.width=q/e*w.height}d.$element.css({position:"fixed",width:w.width+x+v,height:w.height+g+y,top:m/2-(w.height+g+y)/2,left:"50%","margin-left":-1*(w.width+x+v)/2});d.$element.find(".lightbox-content").css({width:w.width,height:w.height});j.fire()};w.src=k.attr("src")};var c=b.fn.lightbox;b.fn.lightbox=function(d){return this.each(function(){var g=b(this);var e=g.data("lightbox");var f=b.extend({},b.fn.lightbox.defaults,g.data(),typeof d=="object"&&d);if(!e){g.data("lightbox",e=new a(this,f))}if(typeof d=="string"){e[d]()}else{if(f.show){e.show()}}})};b.fn.lightbox.defaults={backdrop:true,keyboard:true,show:true};b.fn.lightbox.Constructor=a;b.fn.lightbox.noConflict=function(){b.fn.lightbox=c;return this};b(document).on("click.lightbox.data-api",'[data-toggle="lightbox"]',function(e){var h=b(this);var g=h.attr("href");var d=b(h.attr("data-target")||g&&g.replace(/.*(?=#[^\s]+$)/,""));var f=d.data("lightbox")?"toggle":b.extend({remote:!/#/.test(g)&&g},d.data(),h.data());e.preventDefault();d.lightbox(f).one("hide",function(){h.focus()})})}(window.jQuery);