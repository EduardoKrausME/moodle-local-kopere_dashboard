tinymce.ThemeManager.add("modern",function(v){var p=this,y=v.settings,B=tinymce.ui.Factory,r=tinymce.each,q=tinymce.DOM;var A={file:{title:"File",items:"newdocument"},edit:{title:"Edit",items:"undo redo | cut copy paste pastetext | selectall"},insert:{title:"Insert",items:"|"},view:{title:"View",items:"visualaid |"},format:{title:"Format",items:"bold italic underline strikethrough superscript subscript | formats | removeformat"},table:{title:"Table"},tools:{title:"Tools"}};var C="undo redo | styleselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image";function s(){var b=[];function a(e){var d=[],f;if(!e){return}r(e.split(/[ ,]/),function(h){var g;function i(){var j=v.selection;if(g=="bullist"){j.selectorChanged("ul > li",function(n,m){var l,k=m.parents.length;while(k--){l=m.parents[k].nodeName;if(l=="OL"||l=="UL"){break}}h.active(n&&l=="UL")})}if(g=="numlist"){j.selectorChanged("ol > li",function(n,m){var l,k=m.parents.length;while(k--){l=m.parents[k].nodeName;if(l=="OL"||l=="UL"){break}}h.active(n&&l=="OL")})}if(h.settings.stateSelector){j.selectorChanged(h.settings.stateSelector,function(k){h.active(k)},true)}if(h.settings.disabledStateSelector){j.selectorChanged(h.settings.disabledStateSelector,function(k){h.disabled(k)})}}if(h=="|"){f=null}else{if(B.has(h)){h={type:h};if(y.toolbar_items_size){h.size=y.toolbar_items_size}d.push(h);f=null}else{if(!f){f={type:"buttongroup",items:[]};d.push(f)}if(v.buttons[h]){g=h;h=v.buttons[g];if(typeof h=="function"){h=h()}h.type=h.type||"button";if(y.toolbar_items_size){h.size=y.toolbar_items_size}h=B.create(h);f.items.push(h);if(v.initialized){i()}else{v.on("init",i)}}}}});b.push({type:"toolbar",layout:"flow",items:d});return true}if(tinymce.isArray(y.toolbar)){if(y.toolbar.length===0){return}tinymce.each(y.toolbar,function(d,e){y["toolbar"+(e+1)]=d});delete y.toolbar}for(var c=1;c<10;c++){if(!a(y["toolbar"+c])){break}}if(!b.length&&y.toolbar!==false){a(y.toolbar||C)}if(b.length){return{type:"panel",layout:"stack",classes:"toolbar-grp",ariaRoot:true,ariaRemember:true,items:b}}}function t(){var f,a=[];function c(i){var j;if(i=="|"){return{text:"|"}}j=v.menuItems[i];return j}function h(o){var j,m,i,k,l;l=tinymce.makeMap((y.removed_menuitems||"").split(/[ ,]/));if(y.menu){m=y.menu[o];k=true}else{m=A[o]}if(m){j={text:m.title};i=[];r((m.items||"").split(/[ ,]/),function(G){var H=c(G);if(H&&!l[G]){i.push(c(G))}});if(!k){r(v.menuItems,function(F){if(F.context==o){if(F.separator=="before"){i.push({text:"|"})}if(F.prependToContext){i.unshift(F)}else{i.push(F)}if(F.separator=="after"){i.push({text:"|"})}}})}for(var n=0;n<i.length;n++){if(i[n].text=="|"){if(n===0||n==i.length-1){i.splice(n,1)}}}j.menu=i;if(!j.menu.length){return null}}return j}var g=[];if(y.menu){for(f in y.menu){g.push(f)}}else{for(f in A){g.push(f)}}var d=typeof y.menubar=="string"?y.menubar.split(/[ ,]/):g;for(var e=0;e<d.length;e++){var b=d[e];b=h(b);if(b){a.push(b)}}return a}function x(a){function b(d){var c=a.find(d)[0];if(c){c.focus(true)}}v.shortcuts.add("Alt+F9","",function(){b("menubar")});v.shortcuts.add("Alt+F10","",function(){b("toolbar")});v.shortcuts.add("Alt+F11","",function(){b("elementpath")});a.on("cancel",function(){v.focus()})}function w(e,f){var a,g,c,b;function d(h){return{width:h.clientWidth,height:h.clientHeight}}a=v.getContainer();g=v.getContentAreaContainer().firstChild;c=d(a);b=d(g);if(e!==null){e=Math.max(y.min_width||100,e);e=Math.min(y.max_width||65535,e);q.setStyle(a,"width",e+(c.width-b.width));q.setStyle(g,"width",e)}f=Math.max(y.min_height||100,f);f=Math.min(y.max_height||65535,f);q.setStyle(g,"height",f);v.fire("ResizeEditor")}function z(c,b){var a=v.getContentAreaContainer();p.resizeTo(a.clientWidth+c,a.clientHeight+b)}function D(d){var e,a;if(y.fixed_toolbar_container){a=q.select(y.fixed_toolbar_container)[0]}function f(){if(e&&e.moveRel&&e.visible()&&!e._fixed){var i=v.selection.getScrollContainer(),h=v.getBody();var m=0,j=0;if(i){var l=q.getPos(h),k=q.getPos(i);m=Math.max(0,k.x-l.x);j=Math.max(0,k.y-l.y)}e.fixed(false).moveRel(h,v.rtl?["tr-br","br-tr"]:["tl-bl","bl-tl","tr-br"]).moveBy(m,j)}}function g(){if(e){e.show();f();q.addClass(v.getBody(),"mce-edit-focus")}}function c(){if(e){e.hide();e.hideAll();q.removeClass(v.getBody(),"mce-edit-focus")}}function b(){if(e){if(!e.visible()){g()}return}e=p.panel=B.create({type:a?"panel":"floatpanel",role:"application",classes:"tinymce tinymce-inline",layout:"flex",direction:"column",align:"stretch",autohide:false,autofix:true,fixed:!!a,border:1,items:[y.menubar===false?null:{type:"menubar",border:"0 0 1 0",items:t()},s()]});v.fire("BeforeRenderUI");e.renderTo(a||document.body).reflow();x(e);g();v.on("nodeChange",f);v.on("activate",g);v.on("deactivate",c);v.nodeChanged()}y.content_editable=true;v.on("focus",function(){if(d.skinUiCss){tinymce.DOM.styleSheetLoader.load(d.skinUiCss,b,b)}else{b()}});v.on("blur hide",c);v.on("remove",function(){if(e){e.remove();e=null}});if(d.skinUiCss){tinymce.DOM.styleSheetLoader.load(d.skinUiCss)}return{}}function u(b){var c,a,d;if(b.skinUiCss){tinymce.DOM.loadCSS(b.skinUiCss)}c=p.panel=B.create({type:"panel",role:"application",classes:"tinymce",style:"visibility: hidden",layout:"stack",border:1,items:[y.menubar===false?null:{type:"menubar",border:"0 0 1 0",items:t()},s(),{type:"panel",name:"iframe",layout:"stack",classes:"edit-area",html:"",border:"1 0 0 0"}]});if(y.resize!==false){a={type:"resizehandle",direction:y.resize,onResizeStart:function(){var e=v.getContentAreaContainer().firstChild;d={width:e.clientWidth,height:e.clientHeight}},onResize:function(e){if(y.resize=="both"){w(d.width+e.deltaX,d.height+e.deltaY)}else{w(null,d.height+e.deltaY)}}}}if(y.statusbar!==false){c.add({type:"panel",name:"statusbar",classes:"statusbar",layout:"flow",border:"1 0 0 0",ariaRoot:true,items:[{type:"elementpath"},a]})}if(y.readonly){c.find("*").disabled(true)}v.fire("BeforeRenderUI");c.renderBefore(b.targetNode).reflow();if(y.width){tinymce.DOM.setStyle(c.getEl(),"width",y.width)}v.on("remove",function(){c.remove();c=null});x(c);return{iframeContainer:c.find("#iframe")[0].getEl(),editorContainer:c.getEl()}}p.renderUI=function(b){var a=y.skin!==false?y.skin||"lightgray":false;if(a){var c=y.skin_url;if(c){c=v.documentBaseURI.toAbsolute(c)}else{c=tinymce.baseURL+"/skins/"+a}if(tinymce.Env.documentMode<=7){b.skinUiCss=c+"/skin.ie7.min.css"}else{b.skinUiCss=c+"/skin.min.css"}v.contentCSS.push(c+"/content"+(v.inline?".inline":"")+".min.css")}v.on("ProgressState",function(d){p.throbber=p.throbber||new tinymce.ui.Throbber(p.panel.getEl("body"));if(d.state){p.throbber.show(d.time)}else{p.throbber.hide()}});if(y.inline){return D(b)}return u(b)};p.resizeTo=w;p.resizeBy=z});