tinymce.PluginManager.add("contextmenu",function(b){var c,a=b.settings.contextmenu_never_use_native;b.on("contextmenu",function(f){var g;if(!f.ctrlKey||a){if(f.preventDefault(),g=b.settings.contextmenu||"link image inserttable | cell row column deletetable",c){c.show()}else{var h=[];tinymce.each(g.split(/[ ,]/),function(j){var i=b.menuItems[j];"|"==j&&(i={text:j}),i&&(i.shortcut="",h.push(i))});for(var e=0;e<h.length;e++){"|"==h[e].text&&(0===e||e==h.length-1)&&h.splice(e,1)}c=new tinymce.ui.Menu({items:h,context:"contextmenu"}).addClass("contextmenu").renderTo(),b.on("remove",function(){c.remove(),c=null})}var d={x:f.pageX,y:f.pageY};b.inline||(d=tinymce.DOM.getPos(b.getContentAreaContainer()),d.x+=f.clientX,d.y+=f.clientY),c.moveTo(d.x,d.y)}})});